<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<title></title>
</head>
<body onload="init();">
<script src="recycler.js"></script>
<script src="Stops.js"></script>

<canvas id="myCanvas" width="4000" style="background-color:black"></canvas>

<script>
//getting background image
  var img=new Image();
  img.src="LV.jpg";
//declaring globbal variables
  var ctx=undefined;
  var stops;
  var width=9;
  var height=2.75;
  var left=20.1;
  var ttop=58.26;

  function EyeOpener(Ob){//shows all busstops
    ctx.fillRect((Ob.degE-left)*myCanvas.width/width-2,(ttop-Ob.degN)*myCanvas.height/height-2,4,4);
  }
  function init(){//initializes canvas and busstops
    ctx=myCanvas.getContext("2d");

    var acth=img.height*(myCanvas.width/img.width);
    myCanvas.height=acth;
    ctx.drawImage(img,0,0,myCanvas.width,acth);
    recycle();
    waiter();

  }
  function waiter(){
    if(done==false){
      setTimeout(waiter,10);
      return;
    }
    stops=reA;
    ctx.fillStyle="white";
    stops.forEach(EyeOpener);
    setTimeout(update,10);
  }
  function update(){//main update

    setTimeout(update,10);
  }
</script>

</body>
</html>
